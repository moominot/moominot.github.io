<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulari amb Firebase</title>

</head>
<body>
    <h1>Formulari de Dades</h1>
    <form id="formulari">
        <label for="nom">Nom:</label><br>
        <input type="text" id="nom" name="nom" required><br><br>

        <label for="correu">Correu electrònic:</label><br>
        <input type="email" id="correu" name="correu" required><br><br>

        <label for="missatge">Missatge:</label><br>
        <textarea id="missatge" name="missatge" rows="4" required></textarea><br><br>

        <button type="submit">Enviar</button>
    </form>

    <p id="resposta"></p>

    <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyBDeC21hIyFhCD_j3hWdpgvfbZ1zjZyFvc",
    authDomain: "provatempsreal.firebaseapp.com",
    projectId: "provatempsreal",
    storageBucket: "provatempsreal.firebasestorage.app",
    messagingSenderId: "269372325034",
    appId: "1:269372325034:web:619f20a3c0ebbee24864d3"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
</script>

    <script>

        const database = firebase.database(app);

        const formulari = document.getElementById('formulari');
        formulari.addEventListener('submit', async (event) => {
            event.preventDefault();

            // Recull les dades del formulari
            const dades = {
                nom: document.getElementById('nom').value,
                correu: document.getElementById('correu').value,
                missatge: document.getElementById('missatge').value,
                data: new Date().toISOString()
            };

            try {
                // Desa les dades a Firebase
                await firebase.database().ref('respostes').push(dades);
                document.getElementById('resposta').textContent = "Formulari enviat amb èxit!";
                formulari.reset();
            } catch (error) {
                document.getElementById('resposta').textContent = "Error en enviar el formulari.";
                console.error(error);
            }
        });
    </script>
</body>
</html>
