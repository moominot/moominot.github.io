<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tax√≠metro Avanzado y Responsive</title>
    <style>
        /* --- ESTILOS CSS --- */
        :root {
            /* Variables de color */
            --bg-color: #2c3e50; /* Azul oscuro */
            --taximeter-color: #34495e; /* Gris azulado */
            --display-color: #1a1a1a;
            --font-color: #00ff00; /* Verde digital */
            --font-color-alt: #f1c40f; /* Amarillo */
            --btn-start: #2ecc71; /* Verde */
            --btn-stop: #e74c3c; /* Rojo */
            --btn-extra: #3498db; /* Azul */
        }

        body, html {
            height: 100%;
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: white;
            /* Asegura que el contenido ocupe toda la ventana */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .taximetro {
            /* Dise√±o adaptativo para ocupar la pantalla de la tablet (horizontal) */
            display: flex;
            flex-direction: column;
            width: 90%;
            max-width: 800px;
            height: 90%;
            padding: 20px;
            border-radius: 15px;
            background-color: var(--taximeter-color);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            text-align: center;
        }

        h1 {
            margin-top: 0;
            color: white;
            font-size: 2.5em;
        }

        /* Secci√≥n principal de la pantalla y controles */
        .main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .pantalla {
            background-color: var(--display-color);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: right;
            border: 2px solid var(--font-color);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
        }

        .pantalla p {
            margin: 5px 0;
            font-family: 'Courier New', monospace;
            color: var(--font-color);
        }

        #total {
            font-size: 5em; /* Grande para la tablet */
            font-weight: bold;
            display: block;
            line-height: 1;
        }

        .estado {
            color: var(--font-color-alt);
            font-style: italic;
            font-size: 1.5em;
        }

        .controles, .extras {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap; /* Para que se adapten si hay muchos botones */
            margin-top: 10px;
        }

        .controles button, .extras button {
            padding: 15px 20px;
            margin: 5px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1em;
            transition: background-color 0.3s, opacity 0.3s;
            flex: 1 1 45%; /* Para que los botones se repartan en el espacio */
            min-width: 150px;
        }

        /* Estilos espec√≠ficos de botones */
        #iniciarBtn {
            background-color: var(--btn-start);
            color: white;
        }

        #finalizarBtn {
            background-color: var(--btn-stop);
            color: white;
        }
        
        .extras button {
            background-color: var(--btn-extra);
            color: white;
            flex: 1 1 auto; /* Los extras pueden ser m√°s peque√±os */
            min-width: 100px;
            font-size: 1em;
        }

        .active-extra {
            border: 3px solid var(--font-color-alt);
            box-shadow: 0 0 10px var(--font-color-alt);
            background-color: #2980b9 !important; /* Un poco m√°s oscuro */
        }

        button:hover:not(:disabled) {
            opacity: 0.9;
        }

        button:disabled {
            background-color: #666;
            cursor: not-allowed;
            opacity: 0.6;
        }
    </style>
</head>
<body>
    <div class="taximetro">
        <h1>üöï Tax√≠metro Avanzado</h1>
        <div class="main-content">
            <div class="pantalla">
                <p>Tarifa Base: ‚Ç¨<span id="tarifaBase">3.50</span></p>
                <p class="estado" id="estado">Detenido</p>
                <p id="total">‚Ç¨0.00</p>
            </div>

            <div class="extras">
                <button id="nocturnaBtn">Tarifa Nocturna</button>
                <button id="equipajeBtn">Equipaje (+‚Ç¨2.50)</button>
                <button id="turistaBtn">Tarifa Turista ‚ö°</button>
                <button id="amigoBtn">Precio Amigo (-10%)</button>
            </div>

            <div class="controles">
                <button id="iniciarBtn">‚ñ∂Ô∏è Iniciar Viaje</button>
                <button id="finalizarBtn" disabled>‚èπÔ∏è Finalizar Viaje</button>
            </div>
        </div>
    </div>

    <script>
        /* --- C√ìDIGO JAVASCRIPT --- */
        // Referencias a los elementos del DOM
        const totalElement = document.getElementById('total');
        const estadoElement = document.getElementById('estado');
        const iniciarBtn = document.getElementById('iniciarBtn');
        const finalizarBtn = document.getElementById('finalizarBtn');

        // Botones de Extras
        const nocturnaBtn = document.getElementById('nocturnaBtn');
        const equipajeBtn = document.getElementById('equipajeBtn');
        const turistaBtn = document.getElementById('turistaBtn');
        const amigoBtn = document.getElementById('amigoBtn');

        // Configuraci√≥n de Tarifas
        const BASE = 3.50;
        const TARIFA_NORMAL = 0.01; // ‚Ç¨0.01 por segundo
        const TARIFA_NOCTURNA_MULTIPLICADOR = 1.30; // 30% m√°s
        const TARIFA_TURISTA_MULTIPLICADOR = 5.0; // 5 veces m√°s R√ÅPIDO
        const EXTRA_EQUIPAJE = 2.50;
        const DESCUENTO_AMIGO = 0.90; // 10% de descuento

        let totalAcumulado = 0;
        let viajeActivo = false;
        let intervalo;
        let extras = {
            nocturna: false,
            equipaje: false,
            turista: false,
            amigo: false
        };

        // Funci√≥n principal para actualizar el contador
        function actualizarTaximetro() {
            if (!viajeActivo) return;

            let tarifaActual = TARIFA_NORMAL;

            // 1. Aplicar multiplicador por Tarifa Nocturna
            if (extras.nocturna) {
                tarifaActual *= TARIFA_NOCTURNA_MULTIPLICADOR;
            }

            // 2. Aplicar multiplicador por Tarifa Turista (hace que corra m√°s deprisa)
            if (extras.turista) {
                tarifaActual *= TARIFA_TURISTA_MULTIPLICADOR;
            }

            totalAcumulado += tarifaActual;

            let totalConDescuento = totalAcumulado;

            // 3. Aplicar Descuento Amigo (al total)
            if (extras.amigo) {
                totalConDescuento *= DESCUENTO_AMIGO;
            }

            // Mostrar el total con dos decimales
            totalElement.textContent = `‚Ç¨${totalConDescuento.toFixed(2)}`;
        }

        // Funci√≥n para cambiar el estado de un extra
        function toggleExtra(extraKey, buttonElement) {
            if (viajeActivo) return; // No se pueden cambiar las tarifas una vez iniciado

            extras[extraKey] = !extras[extraKey];
            buttonElement.classList.toggle('active-extra', extras[extraKey]);

            // Caso especial: Turista y Amigo son excluyentes en este ejemplo, no tienen sentido combinados.
            if (extraKey === 'turista') {
                if (extras.turista && extras.amigo) {
                    extras.amigo = false;
                    amigoBtn.classList.remove('active-extra');
                }
            } else if (extraKey === 'amigo') {
                 if (extras.amigo && extras.turista) {
                    extras.turista = false;
                    turistaBtn.classList.remove('active-extra');
                }
            }
        }

        // Event Listeners para los botones de extras
        nocturnaBtn.addEventListener('click', () => toggleExtra('nocturna', nocturnaBtn));
        equipajeBtn.addEventListener('click', () => toggleExtra('equipaje', equipajeBtn));
        turistaBtn.addEventListener('click', () => toggleExtra('turista', turistaBtn));
        amigoBtn.addEventListener('click', () => toggleExtra('amigo', amigoBtn));


        // Evento al hacer click en "Iniciar Viaje"
        iniciarBtn.addEventListener('click', () => {
            if (viajeActivo) return;

            viajeActivo = true;
            totalAcumulado = BASE; // Aplica la tarifa base al iniciar

            // Aplicar extra de equipaje (solo al inicio)
            if (extras.equipaje) {
                totalAcumulado += EXTRA_EQUIPAJE;
            }

            // Actualizar la pantalla con el coste inicial
            actualizarTaximetro();
            
            estadoElement.textContent = 'EN CURSO...';
            estadoElement.style.color = '#00ff00';

            // Deshabilita Iniciar/Extras, habilita Finalizar
            iniciarBtn.disabled = true;
            finalizarBtn.disabled = false;
            document.querySelectorAll('.extras button').forEach(btn => btn.disabled = true);

            // Inicia el intervalo que aumenta el precio cada 1000ms (1 segundo)
            intervalo = setInterval(actualizarTaximetro, 1000);
        });

        // Evento al hacer click en "Finalizar Viaje"
        finalizarBtn.addEventListener('click', () => {
            if (!viajeActivo) return;

            viajeActivo = false;
            clearInterval(intervalo); // Detiene el contador

            estadoElement.textContent = 'FINALIZADO';
            estadoElement.style.color = 'yellow';

            // Muestra un resumen
            alert(`
                ¬°Viaje Finalizado!
                Total a pagar: ${totalElement.textContent}
                Extras aplicados:
                - Nocturna: ${extras.nocturna ? 'S√ç' : 'NO'}
                - Equipaje: ${extras.equipaje ? 'S√ç' : 'NO'}
                - Turista: ${extras.turista ? 'S√ç' : 'NO'}
                - Precio Amigo: ${extras.amigo ? 'S√ç' : 'NO'}
            `);

            // Habilita Iniciar/Extras, deshabilita Finalizar
            iniciarBtn.disabled = false;
            finalizarBtn.disabled = true;
            document.querySelectorAll('.extras button').forEach(btn => btn.disabled = false);

            // Reinicia la pantalla para el siguiente viaje
            totalAcumulado = 0;
            totalElement.textContent = `‚Ç¨${BASE.toFixed(2)}`;
            estadoElement.textContent = 'Detenido';
            estadoElement.style.color = '#f1c40f'; // Amarillo
            
            // Reinicia los extras visualmente
            document.querySelectorAll('.extras button').forEach(btn => btn.classList.remove('active-extra'));
            // NO se reinician los extras l√≥gicamente para permitir que se preseleccionen para el siguiente viaje
            extras = { nocturna: false, equipaje: false, turista: false, amigo: false };
        });

        // Inicializaci√≥n: configura el precio inicial al cargar la p√°gina
        document.getElementById('tarifaBase').textContent = BASE.toFixed(2);
        totalElement.textContent = `‚Ç¨${BASE.toFixed(2)}`;
    </script>
</body>
</html>
