<!DOCTYPE html>
<html>
  <head>
    <base target="_top" />

    <meta charset="utf-8" />

    <meta
      name="viewport"
      content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1"
    />
    <title>noIframe</title>

    <style>
      .iframecontainer {
        position: absolute;
        overflow: hidden;
        width: 100%;
        top: 0px;
        bottom: 0;
      }

      /* Then style the iframe to fit in the container div with full height and width */
      .responsive-iframe {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        width: 100%;
        height: 100%;
        border: none;
      }
    </style>
  </head>

  <body>
    <div class="iframecontainer">
      <iframe
        name="iframeView"
        id="divisio"
        class="responsive-iframe"
        src=""
      ></iframe>
    </div>

    <script>
      const queryString = window.location.search;
      console.log(queryString);
      const urlParams = new URLSearchParams(queryString);
      var iframe = document.getElementById("divisio");
      var apphttp = queryString.replace("?url=", "");
      var confighttp = "noiframeinput.html";

      window.addEventListener("load", function () {
        urlParams.has("url") ? vesURL(apphttp) : vesURL(confighttp);
      });
      iframe.addEventListener("load", carregaScripts, true);

      function vesURL(url) {
        iframe.src = url;
      }
      function carregaScripts() {
        setTimeout(() => {
          document
            .querySelectorAll(".article-body--truncated")
            .forEach((r) => r.classList.remove("article-body--truncated"));

          document.querySelector(".article-body--seo-closed").style.display =
            "initial";
          document.getElementById("paywall").remove();
          console.log("Delayed for 1 second.");
        }, "1000");
      }
    </script>
  </body>
</html>
