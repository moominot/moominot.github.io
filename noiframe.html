<!DOCTYPE html>
<html>
  <head>
    <base target="_top" />
    <meta
      charset="utf-8"
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
      
    />
    <!-- <meta content="user-scalable=no"> -->
    <title>noIframe</title>

    <style>
      body{        
        margin: 0px;
      }
      
      .iframecontainer {
        position: absolute;
        overflow: hidden;
        width: 100%;
        top: 0px;
        bottom: 0;
      }

      /* Then style the iframe to fit in the container div with full height and width */
      .responsive-iframe {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        width: 100%;
        height: 100%;
        border: none;
      }
    </style>
  </head>

  <body>
    <div class="iframecontainer">
      <iframe
        name="iframeView"
        id="divisio"
        class="responsive-iframe"
        src=""
      ></iframe>
    </div>

    <script>
      const queryString = window.location.search;
      console.log(queryString);
      const urlParams = new URLSearchParams(queryString);
      var iframe = document.getElementById("divisio");
      var apphttp = queryString.replace("?url=", "");
      var confighttp = "noiframeinput.html";

      window.addEventListener("load", function () {
        urlParams.has("url") ? vesURL(apphttp) : vesURL(confighttp);
      });
      iframe.addEventListener("load", carregaScripts, true);

      function vesURL(url) {
        iframe.src = url;
      }
      function iframeRef( frameRef ) {
    return frameRef.contentWindow
        ? frameRef.contentWindow.document
        : frameRef.contentDocument
}


      function carregaScripts() {
        setTimeout(() => {
          hackDiaris()
     /*      document
            .querySelectorAll(".article-body--truncated")
            .forEach((r) => r.classList.remove("article-body--truncated"));

          document.querySelector(".article-body--seo-closed").style.display =
            "initial";
          document.getElementById("paywall").remove();
          console.log("Delayed for 1 second."); */
        }, "1000");
      }
      function hackDiaris(){
        
        var loc= iframe.src

if(loc.indexOf("elpais.com")>0){
  iframe.querySelector("#ctn_freemium_article").remove
  var artamagat = iframeRef(document.querySelector(".a_b_wall._dn"))
    artamagat.classList.add("a_c")
    artamagat.classList.remove("a_b_wall")
    artamagat.classList.remove("_dn")
  
}else if(loc.indexOf("arabalears.cat")>0||loc.indexOf("ara.cat")>0){
  iframeRef(document.querySelector(".paywall").remove())
  iframeRef(document.body.classList.remove("closed"))
  var amagat = iframeRef(document..querySelectorAll(".ara-body div"))
      amagat.forEach(div=>{
        if(div.style.display="none"){
        div.style.display="block"  
        div.classList.add("ara-body")}
      })
  
}else if(loc.indexOf("ultimahora.es")>0){
  iframeRef(document.querySelector(".unregistered-content").remove())
  iframeRef(document.querySelector(".registered-content").classList.remove("registered-content"))
  iframeRef(document.querySelector(".teads-inread").remove())
  iframeRef(document.querySelector(".henneoHB-intext").remove())
  iframeRef(document.querySelectorAll(".adimpact-3").forEach(el=>el.remove()))
  iframeRef(document.querySelectorAll(".ads-container").forEach(ad=>ad.remove()))
                     
}else if(loc.indexOf("diariodemallorca.es")>0||loc.indexOf("diariodeibiza.es")>0){
 iframeRef(document.querySelectorAll(".article-body--truncated").forEach(r => r.classList.remove("article-body--truncated"))  )
 iframeRef(document.querySelector(".article-body--seo-closed").style.display) = "initial";
  iframeRef(document.getElementById("paywall").remove());
}
      }
    </script>
  </body>
</html>
